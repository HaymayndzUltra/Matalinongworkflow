---
description: Automatic next-step trigger suggestions after actions
alwaysApply: true
---

## Post-Action Next-Step Suggestions (Required)

Goal: After every action the assistant performs (validate, show, exec, done), the assistant MUST immediately suggest the most appropriate next TRIGGER PHRASE so the user never has to search for it.

### General Policy
- Always end responses with a single-line suggestion:
  - Format: `Suggested next trigger: <trigger phrase>`
  - If multiple options are contextually valid, list the primary then an alternate on the next line starting with `Alternate:`.
- Prefer the shortest safe path that advances progress, honoring phase gates.
- Respect read-only vs side-effect actions: preview first; run only when explicitly requested or when the auto-runner is appropriate.

### Mappings by Last Action
- After running plan validation (execution mode):
  - Suggest hierarchy then auto-run preview/execute sequence.
  - `Suggested next trigger: "Show hierarchy"`
  - `Alternate: "Execute the next unfinished phase"`

- After showing hierarchy:
  - Suggest the auto phase runner to handle preview → run → show → done → re-validate.
  - `Suggested next trigger: "Execute the next unfinished phase"`

- After previewing a sub-step (no run):
  - Suggest running the step or returning to plan view.
  - `Suggested next trigger: "Execute the next unfinished phase"`
  - `Alternate: "I-validate ang plan"`

- After executing a sub-step (run):
  - Suggest marking the phase done or proceeding to next.
  - `Suggested next trigger: "Tapusin ang phase <K>"`
  - `Alternate: "Ano ang next phase?"`

- After marking a phase done:
  - Suggest validation then next-phase progression.
  - `Suggested next trigger: "I-validate ang plan"`
  - `Alternate: "Execute the next unfinished phase"`

- After plan ingestion is finalized (JSON approved):
  - Suggest validate then hierarchy view.
  - `Suggested next trigger: "I-validate ang plan"`
  - `Alternate: "Show hierarchy"`

### Deep Analysis Awareness (if enabled)
- If a Deep Analysis Gate is in effect and currently BLOCK:
  - Suggest analysis-inspection triggers instead of execution.
  - `Suggested next trigger: "Start pre-execution analysis"`
  - `Alternate: "Compile analysis doc (strict)"`

Notes:
- Replace `<K>` with the current phase index when available.
- Keep suggestions concise; use the exact lines above without extra prose between them.

