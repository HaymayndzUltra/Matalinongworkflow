[
  {
    "id": "kyc_face_backend_actionable_20250815",
    "description": "Actionable plan compiled from organizer (memory-bank/plan/organize.md): Backend-only face scan implementation.",
    "todos": [
      {
        "text": "PHASE 0: SETUP & PROTOCOL (READ FIRST)\n\n**Explanations:** Backend-only endpoints, scoring, telemetry, privacy/audit, thresholds. No UI edits.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 0\n\nIMPORTANT NOTE: Backend-only edits; feature flags allowed; follow gates. Use read-only analyzers (python3 plan_next.py, python3 plain_hier.py). Agent does not write queue/state files; JSON output-only.",
        "done": true
      },
      {
        "text": "PHASE 1: CONTRACTS & STATIC MOUNT SCAFFOLDING\n\n**Explanations:** Add Pydantic models for face scan APIs; define contracts; mount `/web` path (no UI changes). DoD: Contracts compile; OpenAPI exposes new endpoints; `/web` mounted.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 1\n\nIMPORTANT NOTE: No breaking changes to existing endpoints.",
        "done": false
      },
      {
        "text": "PHASE 2: THRESHOLD MANAGER (STRICT FACE GATES)\n\n**Explanations:** Add thresholds (bbox_fill, centering, pose, Tenengrad@640w, brightness mean/p05/p95, stability ms, PAD min, burst caps, match thresholds). DoD: Values validated; env overrides documented.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 2\n\nIMPORTANT NOTE: Explicit names; validation and bounds enforced.",
        "done": false
      },
      {
        "text": "PHASE 3: GEOMETRY & GATING LIBRARY\n\n**Explanations:** Implement src/face/geometry.py for occupancy, centering, pose, brightness, Tenengrad, stability; return reasoned failures. DoD: Pure functions with unit tests; deterministic outputs.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 3\n\nIMPORTANT NOTE: No I/O side-effects.",
        "done": false
      },
      {
        "text": "PHASE 4: /face/lock/check ENDPOINT\n\n**Explanations:** Evaluate lock using geometry + thresholds; require continuous pass ≥900 ms (UI runs 600 ms countdown after lock). DoD: Returns {ok, lock, reasons[], thresholds{}}; perf ≤20 ms typical.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 4\n\nIMPORTANT NOTE: No images accepted; rate limit safe.",
        "done": false
      },
      {
        "text": "PHASE 5: PASSIVE PAD PRE-GATE\n\n**Explanations:** POST /face/pad/pre using PAD detector; spoof heuristics (moiré, flat textures, uniform glare). Block when score <0.70 or spoof_high. DoD: Returns passive_score + spoof flags; respected by UI.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 5\n\nIMPORTANT NOTE: Images handled transiently; no persistence.",
        "done": false
      },
      {
        "text": "PHASE 6: CHALLENGE SEQUENCER (VALIDATION)\n\n**Explanations:** src/face/challenges.py; /face/challenge/script (pick 2 actions; TTL ≤7s), /face/challenge/verify (EAR/MAR/yaw/time checks). DoD: Per-action ≤3.5s; cancel on pose/brightness breach.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 6\n\nIMPORTANT NOTE: Deterministic outcomes with reasons.",
        "done": false
      },
      {
        "text": "PHASE 7: BURST UPLOAD & STORAGE POLICY\n\n**Explanations:** /face/burst/upload ≤24 frames/≤3.5s; transient storage (RAM/tmpfs); EXIF strip; auto-delete post-eval. DoD: Enforced limits; cleanup even on errors.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 7\n\nIMPORTANT NOTE: No gallery writes; no long-term storage.",
        "done": false
      },
      {
        "text": "PHASE 8: CONSENSUS & BIOMETRICS EVAL\n\n**Explanations:** src/face/consensus.py filters blur/glare/pose-fail; top-k=5; match vs ID photo; median≥0.62; ≥3 frames≥0.58; no top-k <0.58. Endpoint: /face/burst/eval. DoD: Returns {match_score, consensus_ok, frames_used, topk_scores[]}.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 8\n\nIMPORTANT NOTE: FAR target ~1%; thresholds configurable.",
        "done": false
      },
      {
        "text": "PHASE 9: DECISION MAPPING (FACE COMPONENT)\n\n**Explanations:** /face/decision maps passive_score, challenges_passed, consensus_ok, match_score to approve/review/deny with reasons; auto-deny on liveness_fail/consensus_fail/spoof_high. DoD: Human-readable reasons + policy_version snapshot.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 9\n\nIMPORTANT NOTE: No PII in decision logs.",
        "done": false
      },
      {
        "text": "PHASE 10: TELEMETRY & /metrics\n\n**Explanations:** POST /face/telemetry for FACE_SEARCHING, FACE_LOCK, COUNTDOWN_START/STOP, BURST_START/END, CHALLENGE_ISSUED/PASSED/FAILED, LIVENESS_PASS/FAIL, MATCH_SCORE, CONSENSUS_OK, FACE_DONE. /metrics exposes time_to_lock_ms, cancel_rate, challenge_success_rate, median_match_score, passive_pad_fmr/fnmr. DoD: Aggregates only; device model if available.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 10\n\nIMPORTANT NOTE: Respect privacy; no raw images.",
        "done": false
      },
      {
        "text": "PHASE 11: PRIVACY & WORM AUDIT\n\n**Explanations:** Enforce privacy (no gallery, EXIF strip, redacted logs). WORM audit snapshot with thresholds used & decision rationale. DoD: Audit entries written; retention policy documented.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 11\n\nIMPORTANT NOTE: Store policy snapshot and metrics only.",
        "done": false
      },
      {
        "text": "PHASE 12: ACCEPTANCE CRITERIA & VALIDATION\n\n**Explanations:** Validate targets—Lock p50 ≤1.2s, p95 ≤2.5s; countdown ≥600ms; cancel-on-jitter <50ms; challenge pass-rate ≥95% (good light); TAR@FAR1% ≥0.98 (eval set); PAD FMR ≤1%, FNMR ≤3%. Metrics exposed and documented. DoD: Report with metrics; threshold proposals if gaps exist.\n\n**Concluding Step: Phase Completion Protocol**\npython3 todo_manager.py show\npython3 todo_manager.py done 12\n\nIMPORTANT NOTE: Use ThresholdManager for adjustments; no hardcoding in code.",
        "done": false
      }
    ],
    "status": "in_progress",
    "created": "2025-08-15T00:00:00+08:00",
    "updated": "2025-08-16T03:22:05.268559+08:00"
  }
]